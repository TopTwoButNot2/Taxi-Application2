@model TaxiApplication.Data.Reservation
@using TaxiApplication.Data
@using TaxiApplication.BusinessLogics

@{
    ViewBag.Title = "ConfirmDetails";
    BusinessLogic bl = new BusinessLogic();
    Reservation r = new Reservation();
        Layout = "~/Views/Shared/_Passenger.cshtml";

    var msg = TempData["AlertMessage"] ?? string.Empty;
}

@*<script type="text/javascript">
        var msg = '@msg';
        if (msg)
        {
            alert(msg)
        }

    </script>*@

<script>
    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>
    
<style>


        /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
        background-color: inherit;
        float: left;
        border: none;
        outline: none;
        cursor: pointer;
        padding: 14px 16px;
        transition: 0.3s;
        font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
        background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
        background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }
</style>

<div class="tab">
    <button class="tablinks" onclick="openCity(event, 'London')"> Confirm Details</button>
    @*<button class="tablinks" onclick="openCity(event, 'Paris')">My Reservations</button>*@
</div>

<div id="London" class="tabcontent" style="display:block">
    <br /><br />
    <div class="panel panel-info">
        <div class="panel-heading">
            <h3>Confirm Application</h3>
        </div>
        <img src="~/Images/@Model.picture" width="300" height="250" />
        <div class="panel-body" style="height:25em;overflow-y:auto">
            <h4>Please Confirm Correctness of details.</h4>
            <table class="table table-bordered table-striped">
                @foreach (var a in bl.passengerAvail(Convert.ToInt16(Session["rid"])))
                {

                    <tr>
                    <tr>
                        <td>Route Name</td>
                        <td>@a.schedule.route.RouteName</td>
                    </tr>
                    <tr>
                        <td>Driver Name</td>
                        <td>@a.TaxiDriver.driver.FirstName</td>
                    </tr>
                    <tr>
                        <td>Phone Number</td>

                        <td>@a.TaxiDriver.driver.PhoneNumber</td>
                    </tr>
                    <tr>
                        <td>Taxi Number</td>

                        <td>@a.TaxiDriver.taxi.TaxiNo</td>
                    </tr>
                    <tr>
                        <td>Taxi Make</td>

                        <td>@a.TaxiDriver.taxi.TaxiMake.MakeType</td>
                    </tr>
                        <tr>
                        <td>Route Route Price</td>

                        <td>@a.schedule.RoutePrice</td>
                    </tr>
                        <tr>
                        <td>Departure Date</td>

                        <td>@Html.DisplayFor(m => m.DepartureDate)</td>
                    </tr>
                    <tr>
                        <td>Number of laggages</td>

                        <td>
                            @Html.DisplayFor(m => m.NumLaggages)
                            </td>
                    </tr>


                    <tr>
                        <td>Small Laggages Price</td>
                        <td>@Session["sm"]</td>
                    </tr>
                    <tr>
                        <td>Medium Laggages Price</td>

                        <td>@Session["med"]</td>
                    </tr>
                    <tr>
                        <td>Large Laggages Price</td>

                        <td>@Session["lg"]</td>
                    </tr>

                    <tr>
                        <td>Total Price</td>
                        <td> @Html.DisplayFor(m => m.TotalPrice)</td>

                    </tr>
                    </tr>
                }
            </table>
        </div>
    </div>
    <p>
        @*@Html.ActionLink("Confirm", "ThankYouPage", "Home", new { id = Model.LaggageID }, new { @class = "btn btn-success" })*@
        @Html.ActionLink("Continue To Map", "Maps", "Home", new { id = Model.BookingId }, new { @class = "btn btn-success" })

        @*<a href="~/Home/ThankYouPage" class="btn btn-success">Confirm</a>|*@
        <a href="~/Reservations/Edit/@Model.BookingId" class="btn btn-primary">Edit Details</a>
    </p>
</div>